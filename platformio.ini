; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
monitor_port = COM4
upload_port = COM4

; SISTEMA COMPLETO: WiFiManager + Sistema Hidropônico
; Fluxo contínuo: AP para configuração -> Cliente WiFi -> Sistema completo

; Configuração de partição para mais espaço de código
board_build.partitions = huge_app.csv
board_build.filesystem = spiffs

lib_deps =
	; Comunicação HTTP e Web Server (versões compatíveis)
	AsyncTCP @ ^1.1.1
	ESP Async WebServer @ ^1.2.3
	
	; WebSockets para Admin Panel
	links2004/WebSockets @ ^2.4.0
	
	; JSON para comunicação (essencial para configuração)
	bblanchon/ArduinoJson @ ^6.21.5
	
	; Sensores
	adafruit/DHT sensor library @ ^1.4.4
	adafruit/Adafruit Unified Sensor @ ^1.1.9
	milesburton/DallasTemperature @ ^3.11.0
	paulstoffregen/OneWire @ ^2.3.7
	
	; Display LCD
	marcoschwartz/LiquidCrystal_I2C @ ^1.1.4
	
	; Expansor I/O para relés
	xreef/PCF8574 library @ ^2.3.4
	
	; Cliente HTTP para Supabase
	HTTPClient
	WiFiClientSecure
	
	; Bibliotecas ESP32
	SPIFFS
	WiFi
	Preferences
	
	; Buffer circular para dados
	rlogiacco/CircularBuffer @ ^1.4.0

; Configurações de build com timeout otimizado
build_flags = 
	-D MASTER_MODE
	-D CORE_DEBUG_LEVEL=3
	-D ASYNCWEBSERVER_REGEX
	-D CONFIG_ARDUHAL_LOG_DEFAULT_LEVEL=3
	-D CONFIG_ASYNC_TCP_STACK_SIZE=16384
	-D CONFIG_ASYNC_TCP_PRIORITY=10
	-D CONFIG_ASYNC_TCP_RUNNING_CORE=1

; Incluir todos los archivos fuente
build_src_filter = 
	+<*>

; Configurações de monitor
monitor_filters = 
	esp32_exception_decoder
